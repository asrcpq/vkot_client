handle buffer at client side

todo:
split server msg
