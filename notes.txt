split client to rh wh

todo:
split msg
